var myApp=angular.module("myApp",["ui.router","ngCookies","ng","ngMessages","ui.bootstrap","angularFileUpload"]);myApp.run(["$rootScope","$state","$stateParams","$http",function(e,t,o,n){e.$state=t,e.$stateParams=o,e.$state.isLogin=!1}]),myApp.constant("API_SERVER","http://cheshangadmin.jingzhengu.com"),myApp.constant("API_PARMS",function(e){var t,o,n,r,a,l,s,i="";for(t in e)if(o=e[t],o instanceof Array)for(s=0;s<o.length;++s)a=o[s],n=t+"[]",l={},l[n]=a,i+=param(l)+"&";else if(o instanceof Object)for(r in o)a=o[r],n=r,l={},l[n]=a,i+=param(l)+"&";else void 0!==o&&null!==o&&(i+=encodeURIComponent(t)+"="+encodeURIComponent(o)+"&");return i.length?i.substr(0,i.length-1):i}),myApp.config(["$httpProvider",function(e){e.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",e.defaults.headers.put["Content-Type"]="application/x-www-form-urlencoded",e.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",e.defaults.transformRequest=[function(e){var t=function(e){var o,n,r,a,l,s,i,p="";for(o in e)if(n=e[o],n instanceof Array)for(i=0;i<n.length;++i)l=n[i],r=o+"["+i+"]",s={},s[r]=l,p+=t(s)+"&";else if(n instanceof Object)for(a in n)l=n[a],null!=l&&(r=o+"."+a,s={},s[r]=l,p+=t(s)+"&");else void 0!==n&&(p+=encodeURIComponent(o)+"="+encodeURIComponent(n)+"&");return p.length?p.substr(0,p.length-1):p};return angular.isObject(e)&&"[object File]"!==String(e)?t(e):e}],e.defaults.useXDomain=!0}]),myApp.config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e,t,o){t.otherwise("login"),o.hashPrefix(""),e.state("login",{url:"/login",templateUrl:"dist/views/login.html",cache:!0,controller:"loginController"}).state("admin",{url:"/admin",templateUrl:"dist/views/admin.html",abstract:!0,controller:"MainController"}).state("admin.page1",{url:"/page1",templateUrl:"dist/views/page1.html",cache:!0,controller:"pageController"}).state("admin.page2",{url:"/page2",templateUrl:"dist/views/page2.html",cache:!0,controller:"pagetcController"}).state("admin.page4",{url:"/note",templateUrl:"dist/views/note.html",cache:!0,controller:"NoteController"}).state("admin.home",{url:"/home",templateUrl:"dist/views/home.html",cache:!0,controller:"homeController"}).state("admin.resetpassword",{url:"/resetpassword",templateUrl:"dist/views/resetpassword.html",cache:!0,controller:"resetController"})}]);
angular.module("myApp").controller("MainController",["$cookieStore","$scope","$location","adminSeverExit","isLogin","usermMsg",function(n,o,e,t,i,a,s){var r=e.path();o.currentType=r.substring(7),o.menuState={show:!1},a.veriLogin().then(function(n){200===n.status?(o.isLogin=!0,o.islogmsg=n.data.nickName):o.isLogin=!1}),a.veriLogin().then(function(n){o.userRole=n.data.sysRoleId}),o.changeTab=function(n,e){o.currentType=n,e.stopPropagation(),"page1"===n||"page4"===n?o.menuState.show=!0:o.menuState.show=!1},o.loinOut=function(){t.servLoginout()}}]);
angular.module("myApp").controller("homeController",["$log","$scope","$http","$timeout","$state","$stateParams","$rootScope","$log","homeServer","commAlertService","$uibModal",function(e,t,n,a,l,o,s,e,i,c,r){t.init=function(){t.myCheckd=[],t.homeList=[],t.cityList={title:"管理员",value:"2"},t.stueList={title:"激活",value:"1"};var e=t.homePage={pageNo:1,pageSize:10};i.getHomeList(e).then(function(e){t.homeList=e.list,t.totalItems=e.total,t.currentPage=1,t.maxSize=5}),t.pageChanged=function(){t.homePage.pageNo=t.currentPage,i.getHomeList(t.homePage).then(function(e){t.homeList=e.list,t.select_all=!1,t.select_one=!1})},t.animationsEnabled=!0,t.homesubmit=function(){var e=t.userInfo={sysRoleId:t.cityList.value,userName:t.username,mobile:t.userphone,password:t.homepassword,status:t.stueList.value},n={pageNo:1,pageSize:10};i.createUser(e).then(function(e){c.alertService().closeAlert(),e.data?i.getHomeList(n).then(function(e){t.homeList=e.list,t.username="",t.userphone="",t.homepassword=""}):c.alertService().add("danger",e.msg,3e3)})},t.toggleAnimation=function(){t.animationsEnabled=!t.animationsEnabled},t.allchekNum=0,t.selectAll=function(){t.select_all?(t.allchekNum=10,t.select_one=!0,t.myCheckd=[],angular.forEach(t.homeList,function(e,n){t.myCheckd.push(e.id)})):(t.allchekNum=0,t.select_one=!1,t.myCheckd=[])},t.select_two=function(e,n){var a=n.target;e=parseInt(e),a.checked?(t.myCheckd.push(e),t.allchekNum++):(t.myCheckd.splice($.inArray(e,t.myCheckd),1),t.allchekNum--),10===t.allchekNum?t.select_all=!0:t.select_all=!1,console.log(t.myCheckd)},t.homedel=function(){if(c.alertService().closeAlert(),t.myCheckd.length>0){var e={del:"1"},n=r.open({animation:t.animationsEnabled,templateUrl:"dist/views/myModalContent.html",controller:"ModalInstanceCtrl",size:100});n.result.then(function(n){n&&i.homeDelete(t.myCheckd,e).then(function(e){1===e.data?(i.getHomeList(t.homePage).then(function(e){t.homeList=e.list,t.select_all=!1,t.select_one=!1}),t.myCheckd=[]):c.alertService().add("danger",e.msg,3e3)})})}},t.homeDisable=function(){if(c.alertService().closeAlert(),t.myCheckd.length>0){var e={status:"0"};i.homeDelete(t.myCheckd,e).then(function(e){200===e.status?(i.getHomeList(t.homePage).then(function(e){t.homeList=e.list,t.select_all=!1,t.select_one=!1}),t.myCheckd=[]):c.alertService().add("danger",e.msg,3e3)})}},t.homeActive=function(){if(t.myCheckd.length>0){var e={status:"1"};i.homeDelete(t.myCheckd,e).then(function(e){200===e.status?(i.getHomeList(t.homePage).then(function(e){t.homeList=e.list,t.select_all=!1,t.select_one=!1}),t.myCheckd=[]):c.alertService().add("danger",e.msg,3e3)})}},t.repetpassword=function(e){e&&i.resetPassword(e).then(function(e){c.alertService().closeAlert(),200===e.status?(i.getHomeList(t.homePage).then(function(e){t.homeList=e.list,c.alertService().add("success","密码重置成功",3e3)}),t.myCheckd=[]):c.alertService().add("danger",e.msg,3e3)})}},t.changeValue=function(e){var n=e.target;t.cityList.title=n.innerHTML,t.cityList.value=n.getAttribute("value")},t.changeStueValue=function(e){var n=e.target;t.stueList.title=n.innerHTML,t.stueList.value=n.getAttribute("value")}}]).controller("ModalInstanceCtrl",["$scope","$uibModalInstance",function(e,t){e.ok=function(){t.close(!0)},e.cancel=function(){t.close(!1)}}]);
angular.module("myApp").controller("loginController",["$scope","$http","$timeout","$state","$stateParams","$rootScope","$log","adminSever",function(o,r,n,i,l,t,e,g){o.loginError=!1,o.loginCheck=function(){var r={userName:o.user,password:o.pwd};o.loginError=!o.loginError;var i=g.getLogin(r);i.then(function(r){if(200!=r.status)o.loginError=!0,o.logintip=r.msg,n(function(){o.loginError=!1},800),console.log(o.loginError);else{var i=r.data;2===i.sysRoleId?t.$state.go("admin.page2"):(o.logintip="你不是普通用户",n(function(){o.loginError=!1},800)),console.log("登录开始走了")}})},o.superloginCheck=function(){var r={userName:o.user,password:o.pwd};o.loginError=!o.loginError;var i=g.getLogin(r);i.then(function(r){if(200!=r.status)o.loginError=!0,o.logintip=r.msg,n(function(){o.loginError=!1},800),console.log(o.loginError);else{var i=r.data;1===i.sysRoleId?t.$state.go("admin.home"):(o.logintip="你不是超管用户",n(function(){o.loginError=!1},800)),console.log("登录开始走了")}})}}]);
angular.module("myApp").controller("NoteController",["$log","$scope","cityServer","cityMsgdata","noteSubmit","$rootScope","commAlertService",function(e,t,a,i,n,o,r){t.init=function(){t.cityList={title:"请选择店铺",value:""},t.stueList={title:"激活",value:"1"},t.pagemsg={pageNo:1,pageSize:10},t.pageUsername="",t.cityFilter=function(e){return void 0!=e.cityId},i.pageoSearch(t.pagemsg).then(function(e){t.citygrlist=e.list,t.totalItems=e.total,t.currentPage=1,t.maxSize=5}),t.pageChanged=function(){t.pagemsg.pageNo=t.currentPage,i.pageoSearch(t.pagemsg).then(function(e){t.citygrlist=e.list})}},t.noteSlidown=function(e){t.notpubishow?(t.notpubishow=!1,t.pagemsg.pageNo=t.currentPage=1,i.pageoSearch(t.pagemsg).then(function(e){t.citygrlist=e.list})):t.notpubishow=!0},t.changeValue=function(e){var a=e.target;t.cityList.title=a.innerHTML,t.cityList.value=a.getAttribute("value"),t.notpubishow=!1,t.pagemsg.pageNo=t.currentPage=1,i.pageoSearch(t.pagemsg).then(function(e){t.citygrlist=e.list})},t.changeStueValue=function(e){var a=e.target;t.stueList.title=a.innerHTML,t.stueList.value=a.getAttribute("value")},t.notesubmit=function(){var e={};r.alertService().closeAlert(),e.dealerId=t.cityList.value,e.realName=t.noteUserName,e.mobile=t.notePhone,e.password=t.notepassword,e.status=t.stueList.value,n.noteGet(e).then(function(e){200===e.status?o.$state.go("admin.page1"):r.alertService().add("danger",e.msg,3e3)})}}]);
angular.module("myApp").controller("pageController",["$log","$scope","FileUploader","cityServer","page1Server","$cookieStore","API_SERVER","commAlertService","$uibModal",function(e,t,a,l,i,c,n,r,s){t.init=function(){t.myCheckd=[],t.userCitList=[],t.cityList={title:"请选择城市",value:""},t.stueList={title:"请选择状态",value:""},t.pagemsg={pageSize:10},t.pageUsername="",l.getCity().then(function(e){t.citygrlist=e.list}),t.cityFilter=function(e){return void 0!=e.cityId},i.pageoSearch(t.pagemsg).then(function(e){t.userCitList=e.list,t.userCitList=e.list,t.totalItems=e.total,t.currentPage=1,t.maxSize=5}),t.pageChanged=function(){t.pagemsg.pageNum=t.currentPage,i.pageoSearch(t.pagemsg).then(function(e){t.userCitList=e.list,t.select_all=!1,t.select_one=!1})},t.userSearch=function(){var e=t.obj={};t.obj.cityId=t.cityList.value,t.obj.realName=t.pageUsername,t.obj.status=t.stueList.value,t.pagemsg.cityId=t.cityList.value,i.pageoSearch(e).then(function(e){t.userCitList=e.list,t.totalItems=e.total,t.currentPage=1,t.maxSize=5})},t.allchekNum=0,t.selectAll=function(){t.select_all?(t.allchekNum=10,t.select_one=!0,t.myCheckd=[],angular.forEach(t.userCitList,function(e,a){t.myCheckd.push(e.id)})):(t.allchekNum=0,t.select_one=!1,t.myCheckd=[])},t.select_two=function(e,a){var l=a.target;e=parseInt(e),l.checked?(t.myCheckd.push(e),t.allchekNum++):(t.myCheckd.splice($.inArray(e,t.myCheckd),1),t.allchekNum--),10===t.allchekNum?t.select_all=!0:t.select_all=!1},t.homedel=function(){if(r.alertService().closeAlert(),t.myCheckd.length>0){var e=s.open({animation:t.animationsEnabled,templateUrl:"dist/views/myModalContent.html",controller:"ModalInstanceCtrl"});e.result.then(function(e){e&&i.homeDelete(t.myCheckd).then(function(e){200===e.status?(i.pageoSearch(t.pagemsg).then(function(e){t.userCitList=e.list,t.userCitList=e.list,t.totalItems=e.total,t.maxSize=5}),t.myCheckd=[],t.select_one=!1,t.select_all=!1):r.alertService().add("danger",e.msg,3e3)})})}},t.homeDisable=function(){r.alertService().closeAlert(),t.myCheckd.length>0&&i.homeNactiv(t.myCheckd).then(function(e){200===e.status?(i.pageoSearch(t.pagemsg).then(function(e){t.userCitList=e.list,t.select_all=!1,t.select_one=!1}),t.myCheckd=[]):r.alertService().add("danger",e.msg,3e3)})},t.homeActive=function(){r.alertService().closeAlert(),t.myCheckd.length>0&&i.homeActive(t.myCheckd).then(function(e){200===e.status?(i.pageoSearch(t.pagemsg).then(function(e){t.userCitList=e.list,t.select_all=!1,t.select_one=!1}),t.myCheckd=[]):r.alertService().add("danger",e.msg,3e3)})}},t.changeValue=function(e){var a=e.target;t.cityList.title=a.innerHTML,t.cityList.value=a.getAttribute("value")},t.changeStueValue=function(e){var a=e.target;t.stueList.title=a.innerHTML,t.stueList.value=a.getAttribute("value")};var o=c.get("userInfo"),u=t.uploader=new a({url:n+"/admin/cust/fileUpload?token="+o.token+"&loginName="+o.loginName,queueLimit:1,alias:"uploadfile",removeAfterUpload:!0,autoUpload:!0});t.clearItems=function(){u.clearQueue()},t.uploader.filters.push({name:"customFilter",fn:function(e,t){var a="|"+e.type.slice(e.type.lastIndexOf(".")+1)+"|";return!(e.size/1024>=1e3)&&"|sheet|".indexOf(a)!==-1}}),u.onWhenAddingFileFailed=function(e,t,a){r.alertService().closeAlert(),e.size/1024>=1e3?r.alertService().add("danger","文件大小必须小于1M",3e3):r.alertService().add("danger","请选择excel表格文件！",3e3)},u.onSuccessItem=function(e,a,l,c){r.alertService().closeAlert(),200===a.status?r.alertService().add("success",a.msg,3e3):r.alertService().add("danger",a.msg,3e3),i.pageoSearch(t.pagemsg).then(function(e){t.userCitList=e.list,t.userCitList=e.list,t.totalItems=e.total,t.currentPage=1,t.maxSize=5}),t.myCheckd=[]},u.onErrorItem=function(e,t,a,l){r.alertService().closeAlert(),r.alertService().add("danger","文件大小必须小于1M,或者文件类型不对！",3e3)}}]);
angular.module("myApp").controller("pagetcController",["$scope","cityServer","cityMsgdata","commAlertService","$uibModal",function(e,t,a,l,c){e.dealerName="",e.currentPage=1,e.m=[],e.checkedList=[],e.myCheckd=[],e.init=function(){e.cityList={title:"请选择城市",value:""},e.stueLList={title:"请选择状态",value:""}},e.pagemsg={pageNo:1,pageSize:10},t.getCity().then(function(t){e.citygrlist=t.list}),a.pageoSearch(e.pagemsg).then(function(t){e.userCitList=t.list,e.totalItems=t.total,e.currentPage=1,e.maxSize=5}),e.pageChanged=function(){e.pagemsg.pageNo=e.currentPage,a.pageoSearch(e.pagemsg).then(function(t){e.userCitList=t.list,e.select_all=!1,e.select_one=!1})},e.dataMsg=function(){var t={};l.alertService().closeAlert(),t.cityId=e.cityList.value,t.carDealerName=e.dealerName,a.getMsgdata(t).then(function(t){200===t.status?(e.pagemsg.pageNo=e.currentPage=1,a.pageoSearch(e.pagemsg).then(function(t){e.userCitList=t.list}),e.cityList={title:"请选择城市",value:""},e.dealerName=""):l.alertService().add("danger",t.msg,3e3)})},e.changeValue=function(t){var a=t.target;e.cityList.title=a.innerHTML,e.cityList.value=a.getAttribute("value")},e.changeStueValue=function(t){var a=t.target;e.stueList.title=a.innerHTML,e.stueList.value=a.getAttribute("value")},e.allchekNum=0,e.selectAll=function(){e.select_all?(e.allchekNum=10,e.select_one=!0,e.myCheckd=[],angular.forEach(e.userCitList,function(t,a){e.myCheckd.push(t.id),e.m[t.id]=!0})):(e.allchekNum=0,e.select_one=!1,e.myCheckd=[],e.m=[])},e.select_two=function(t,a){var l=t.target;a=parseInt(a),l.checked?(e.myCheckd.push(a),e.allchekNum++):(e.myCheckd.splice($.inArray(a,e.myCheckd),1),e.allchekNum--),10===e.allchekNum?e.allCheck=!0:e.allCheck=!1},e.delteData=function(){var t={};t.ids=e.myCheckd.join("-"),l.alertService().closeAlert();var i=c.open({animation:e.animationsEnabled,templateUrl:"dist/views/myModalContent.html",controller:"ModalInstanceCtrl"});i.result.then(function(c){c&&a.delMsgdata(t).then(function(t){console.log(t),200===t.status?(e.pagemsg.pageNo=e.currentPage,a.pageoSearch(e.pagemsg).then(function(t){e.userCitList=t.list,e.select_one=!1,e.select_all=!1,e.myCheckd=[]})):l.alertService().add("danger",t.msg,3e3)})})}}]);
angular.module("myApp").controller("resetController",["$cookieStore","$scope","$location","adminSeverExit","isLogin","usermMsg",function(o,s,e,r,n,t,a){t.veriLogin().then(function(o){200===o.status&&(s.usermobile=o.data.mobile)}),s.paswordsubmit=function(){var o={};o.userName=s.usermobile,o.password=s.oldpassword,o.newPassword=s.newpassword,o.confirmPassword=s.refpassword,n.resetPassword(o).then(function(o){console.log(o),200===o.status&&a.$state.go("login")})}}]);
function HttpInterceptor(e,r){return{request:function(r){return e.get("userInfo").token&&(r.headers.token=e.get("userInfo").token,r.headers.userName=e.get("userInfo").userName),r},requestError:function(t){return e.get("userInfo").token&&e.remove("userInfo"),r.reject(t)},response:function(e){return e},responseError:function(e){return r.reject(e)}}}angular.module("myApp").factory("HttpInterceptor",["$cookieStore","$q",HttpInterceptor]);
angular.module("myApp").factory("cityServer",["$http","$q","$cookieStore","API_SERVER","API_PARMS","$rootScope",function(t,e,o,r,a,n){var u={};return u.getCity=function(){var u=e.defer(),i=o.get("userInfo");return t({method:"post",url:r+"/admin/area/getCityGroupList",data:a(i)}).then(function(t){202===t.data.status||700===t.data.status?(n.$state.go("login"),o.remove("userInfo")):u.resolve(t.data)}).catch(function(t){o.remove("userInfo"),n.$state.go("login")}),u.promise},u}]);
angular.module("myApp").factory("homeServer",["$http","$q","$cookieStore","API_SERVER","API_PARMS","$rootScope",function(e,t,s,o,a,r){var n={};return n.getHomeList=function(n){var u=t.defer(),d=s.get("userInfo");return d.pageNo=n.pageNo,d.pageSize=n.pageSize,e({method:"post",url:o+"/sysUser/getSysUserList",data:a(d)}).then(function(e){202===e.data.status||700===e.data.status?(r.$state.go("login"),s.remove("userInfo")):u.resolve(e.data)}).catch(function(e){s.remove("userInfo"),r.$state.go("login")}),u.promise},n.createUser=function(n){var u=t.defer(),d=s.get("userInfo");return d.sysRoleId=n.sysRoleId,d.userName=n.userName,d.mobile=n.mobile,d.password=n.password,d.status=n.status,e({method:"post",url:o+"/sysUser/insertSysUser",data:a(d)}).then(function(e){202===e.data.status||700===e.data.status?(r.$state.go("login"),s.remove("userInfo")):u.resolve(e.data)}).catch(function(e){s.remove("userInfo"),r.$state.go("login")}),u.promise},n.homeDelete=function(n,u){var d=t.defer(),i=s.get("userInfo");return n&&(i.ids=n.join(",")),u.del&&(i.delete=u.del),u.status&&(i.status=u.status),e({method:"post",url:o+"/sysUser/updateSysUser",data:a(i)}).then(function(e){202===e.data.status||700===e.data.status?(r.$state.go("login"),s.remove("userInfo")):d.resolve(e.data)}).catch(function(e){s.remove("userInfo"),r.$state.go("login")}),d.promise},n.resetPassword=function(n){var u=t.defer(),d=s.get("userInfo");return d.userId=n,e({method:"post",url:o+"/sysUser/reSetPassword",data:a(d)}).then(function(e){202===e.data.status||700===e.data.status?(r.$state.go("login"),s.remove("userInfo")):u.resolve(e.data)}).catch(function(e){s.remove("userInfo"),r.$state.go("login")}),u.promise},n}]);
angular.module("myApp").factory("adminSever",["$http","$q","API_SERVER","API_PARMS","$cookieStore","$rootScope",function(t,e,a,o,n,r){var s={};return s.getLogin=function(s){n.get("userInfo")&&n.remove("userInfo");var u=e.defer();return t({method:"post",url:a+"/sysUser/login",data:o(s)}).then(function(t){if(u.resolve(t.data),200===t.data.status){var e={loginName:t.data.data.mobile,token:t.data.data.token};n.put("userInfo",e)}else 202!==t.data.status&&700!==t.data.status||r.$state.go("login")}).catch(function(t){u.reject("登录错误"),r.$state.go("login")}),u.promise},s}]);
angular.module("myApp").factory("noteSubmit",["$http","$q","API_SERVER","API_PARMS","$cookieStore","$rootScope",function(t,e,o,n,a,r){var u={};return u.noteGet=function(u){var s=e.defer(),i=a.get("userInfo");return u.token=i.token,u.loginName=i.loginName,t({method:"post",url:o+"/admin/cust/createDealerCustomer",data:n(u)}).then(function(t){202===t.data.status||700===t.data.status?(r.$state.go("login"),a.remove("userInfo")):s.resolve(t.data)}).catch(function(t){a.remove("userInfo"),r.$state.go("login")}),s.promise},u}]);
angular.module("myApp").factory("page1Server",["$http","$q","API_SERVER","API_PARMS","$cookieStore","$rootScope",function(e,t,o,a,r,n){var s={};return s.pageoSearch=function(a){var s=t.defer(),u=r.get("userInfo");return a.token=u.token,a.loginName=u.loginName,e({method:"post",url:o+"/admin/cust/getfindDealerCustomer",data:a}).then(function(e){202===e.data.status||700===e.data.status?(n.$state.go("login"),r.remove("userInfo")):s.resolve(e.data)}).catch(function(e){r.remove("userInfo"),n.$state.go("login")}),s.promise},s.homeActive=function(a){var s=t.defer(),u=r.get("userInfo");return a&&(u.ids=a.join("-")),e({method:"post",url:o+"/admin/cust/activeDealerCustomerByIds",data:u}).then(function(e){202===e.data.status||700===e.data.status?(n.$state.go("login"),r.remove("userInfo")):s.resolve(e.data)}).catch(function(e){r.remove("userInfo"),n.$state.go("login")}),s.promise},s.homeNactiv=function(a){var s=t.defer(),u=r.get("userInfo");return a&&(u.ids=a.join("-")),e({method:"post",url:o+"/admin/cust/forbiddenDealerCustomerByIds",data:u}).then(function(e){202===e.data.status||700===e.data.status?(n.$state.go("login"),r.remove("userInfo")):s.resolve(e.data)}).catch(function(e){r.remove("userInfo"),n.$state.go("login")}),s.promise},s.homeDelete=function(a,s){var u=t.defer(),i=r.get("userInfo");return a&&(i.ids=a.join("-")),e({method:"post",url:o+"/admin/cust/deleteDealerCustomerByIds",data:i}).then(function(e){202===e.data.status||700===e.data.status?(n.$state.go("login"),r.remove("userInfo")):u.resolve(e.data)}).catch(function(e){r.remove("userInfo"),n.$state.go("login")}),u.promise},s}]),angular.module("myApp").value("alerts",[]).factory("commAlertService",["$rootScope","$timeout","alerts",function(e,t,o){return{alertService:function(){var a={};return e.alerts=o,a.add=function(o,r,n){e.alerts.push({type:o,msg:r,close:function(){a.closeAlert(this)}}),n&&t(function(){e.alerts=[]},n)},a.closeAlert=function(t){e.alerts.splice(e.alerts.indexOf(t),1)},a}}}]);
angular.module("myApp").factory("cityMsgdata",["$http","$q","API_SERVER","API_PARMS","$cookieStore","$rootScope",function(e,t,a,o,n,r){var s={};return s.pageoSearch=function(s){var u=t.defer(),d=n.get("userInfo");return s.token=d.token,s.loginName=d.loginName,e({method:"post",url:a+"/admin/dealer/getDealerPageList",data:o(s)}).then(function(e){202===e.data.status||700===e.data.status?(r.$state.go("login"),n.remove("userInfo")):u.resolve(e.data)}).catch(function(e){n.remove("userInfo"),r.$state.go("login")}),u.promise},s.getMsgdata=function(s){var u=t.defer(),d=n.get("userInfo");return s.token=d.token,s.loginName=d.loginName,e({method:"post",url:a+"/admin/dealer/createDealer",data:o(s)}).then(function(e){202===e.data.status||700===e.data.status?(r.$state.go("login"),n.remove("userInfo")):u.resolve(e.data)}).catch(function(e){n.remove("userInfo"),r.$state.go("login")}),u.promise},s.delMsgdata=function(s){var u=t.defer(),d=n.get("userInfo");return s.token=d.token,s.loginName=d.loginName,e({method:"post",url:a+"/admin/dealer/deleteDealerByIds",data:o(s)}).then(function(e){202===e.data.status||700===e.data.status?(r.$state.go("login"),n.remove("userInfo")):u.resolve(e.data)}).catch(function(e){n.remove("userInfo"),r.$state.go("login")}),u.promise},s}]);
angular.module("myApp").factory("isLogin",["$http","$q","API_SERVER","API_PARMS","$cookieStore","$rootScope",function(e,o,s,t,r,a){var n={};return n.veriLogin=function(){var n=o.defer();if(void 0!=r.get("userInfo")){var i=r.get("userInfo");e({method:"post",url:s+"/sysUser/isLogin",data:t(i)}).then(function(e){202===e.data.status||700===e.data.status?(a.$state.go("login"),r.remove("userInfo")):n.resolve(e.data)}).catch(function(e){a.$state.go("login"),r.remove("userInfo")})}else n.resolve("false"),a.$state.go("login");return n.promise},n.resetPassword=function(n){var i=o.defer();if(void 0!=r.get("userInfo")){var u=r.get("userInfo");u.userName=u.loginName,u.password=n.password,u.newPassword=n.newPassword,u.confirmPassword=n.confirmPassword,e({method:"post",url:s+"/sysUser/updatePassword",data:t(u)}).then(function(e){i.resolve(e.data),200===e.data.status?(a.$state.go("login"),r.remove("userInfo")):202!==e.data.status&&700!==e.data.status||(a.$state.go("login"),r.remove("userInfo"))}).catch(function(e){a.$state.go("login"),r.remove("userInfo")})}else i.resolve("false"),a.$state.go("login");return i.promise},n}]);
angular.module("myApp").factory("adminSeverExit",["$http","$q","API_SERVER","API_PARMS","$cookieStore","$rootScope",function(t,o,e,r,a,n){var s={};return s.servLoginout=function(s){var u=o.defer(),i=a.get("userInfo");return t({method:"post",url:e+"/sysUser/logOut",data:r(i)}).then(function(t){u.resolve(t.data),200===t.data.status?(a.remove("userInfo"),n.$state.go("login")):202!==t.data.status&&700!==t.data.status||(n.$state.go("login"),a.remove("userInfo"))}).catch(function(t){a.remove("userInfo"),n.$state.go("login")}),u.promise},s}]);
angular.module("myApp").factory("usermMsg",["$http","$q","API_SERVER","API_PARMS","$cookieStore","$rootScope",function(e,t,o,r,n,a){var s={};return s.veriLogin=function(){var s=t.defer();if(void 0!=n.get("userInfo")){var u=n.get("userInfo");e({method:"post",url:o+"/sysUser/getUserInfo",data:r(u)}).then(function(e){202===e.data.status||700===e.data.status?(a.$state.go("login"),n.remove("userInfo")):s.resolve(e.data)}).catch(function(e){n.remove("userInfo"),a.$state.go("login")})}return s.promise},s}]);
angular.module("myApp").directive("userValidator",["$log",function(e){return{restrict:"A",require:"ngModel",link:function(e,r,t,n){var i=/^1[34578]\d{9}$/,u=function(e){return i.test(e)};n.$parsers.push(function(e){var r=u(e);return n.$setValidity("defined",r),!!r&&e})}}}]).directive("namevalidator",["$log",function(e){return{restrict:"A",require:"ngModel",link:function(e,r,t,n){var i=/^[\u4e00-\u9fa5]{2,5}$/,u=function(e){return i.test(e)};n.$parsers.push(function(e){var r=u(e);return n.$setValidity("defined",r),!!r&&e})}}}]).directive("namevaguvalidator",["$log",function(e){return{restrict:"A",require:"ngModel",link:function(e,r,t,n){var i=/^[\u4e00-\u9fa5]{1,5}$/,u=function(e){return i.test(e)};n.$parsers.push(function(e){var r=u(e);return n.$setValidity("defined",r),!!r&&e})}}}]).directive("passwordvalidator",["$log",function(e){return{restrict:"A",require:"ngModel",link:function(e,r,t,n){var i=/^(?!(?:\d+|[a-zA-Z]+)$)[\da-zA-Z]{6,8}$/,u=function(e){return i.test(e)};n.$parsers.push(function(e){var r=u(e);return n.$setValidity("defined",r),!!r&&e})}}}]).directive("alertBar",[function(){return{restrict:"EA",templateUrl:"dist/views/messagetip.html",scope:{message:"=",type:"="},link:function(e,r,t){e.hideAlert=function(){e.message=null,e.type=null}}}}]);